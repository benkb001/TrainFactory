**** URGENT **** 

*** BUGS **** 

* Fix LinearLayout stall infinitely if too small bug 
* Fix bug clicking unresponsive ? 
* progress bar like 1% when it stops crafting
* I think there is a bug with position on chest being relative to (0, 0)
* Machine should remove required items immediately when beginning crafting 
* weird camera flash happening when clicking through inventory
    * probably need to delayed pop
* need to redraw ui when returning to train interface after adding a cart
* progress bar is starting out with a percentage of green? 
* Should redraw the city view if a train arrives
* game is destroying the factory scene even if you aren't in the train, and 
  not redrawing if you are in the train
* If an item in a player's hand is returned to inv but inv is full,
  item should stay in player's hand.
* Machines still crafting if game is paused, need to have machines 
  connected to World.wt instead of using ticks directly
* intermittent bug with split item removing half the items
* probably related, sometimes fast transfer doesn't work even if there are empty slots 
  * probably a slot is being thought of as having an item due to itemID != "" 

**** NEED TO TEST **** 

* test player label change automatically when train arrives 
* test map redrawing when it is supposed to
* WorldTime ! ! ! ! 
* Bootstrap.InitWorld
* ButtonSystem.RegisterHold
* Stepper holding
* Inventory split 
* Speed buttons, pause button
* Machine crafting multiple at once logic
* new inventory transfer functions 
* TAL
* Train flag update, isEmbarking
* ID.GetComponent

**** CLEAN UP **** 

* Move draw button logic into generic 
* Move click system logic into generic 

**** NEXT FEATURES **** 

* Add a way to automate requesting items and managing competition over 
  resources from two machines at the same city. 
  * Let machines take resources faster than 
    they might consume them, essentially they could have their own inventories. Then, machines 
    will take from city inventories in a certain order based on priority, which the player can 
    specify. They can also specify the max number of each resource a machine should try to take 
    before lower priority machines can take it. 
      * Add a stepper to set priority in machine interface 
      * Add a stepper to set numbe of recipes to store before letting lower prio machines take. 
      * Add logic for machines taking sooner than needed 

* Make UI for player automating trains 
  * First, write some basic programs player can pick from 
  * Make a machine to build a Motherboard
  * Player can only set the program when using a Motherboard 
  * Add a button in train interface to go to Train automation interface 
  * Make train automation interface 
    * There will be one button for each possible program 
    * Will need data entities that have functions that accept a train 
      and make a TALBody based on it and its id 

* Make a way to slowly get resources manually, but all machines have to be built. Instead of machine 
  upgrade as a universal recipe, also use the recipe to build a machine as its upgrade method. 
  * Make it so player can manually get Iron, Sand, and Wood at no cost.
    * Add an option to machine constructor for manual production, if set there will be a button
      in the machine interface that, when clicked and held for long enough, will craft. It'll have 
      its own separate progress bar as well
  * Add machines to craft drills, pumps, excavators, greenhouses, gasifiers, kilns, and assemblers.
    * Each assembler can be upgraded with the same recipe 
    * The kiln recipe can't take glass, greenhouses will take a lot of it
  * Change machine upgrade button to check for a specific item, not just machine upgrade ID 

* Add an abstraction to add/take from trains that have multiple inventories, use this in TAL

**** CLEANUP AFTER FIRST PROTOTYPE IS DONE **** 

* Catch up on tests, except ignore things that are going to be changed as described below
* Change how scene works
  * I am thinking each potential UI screen or level, etc, has a hardcoded scene value and 
    camera position, then we just need to keep track of which scene to go to. This will 
    decouple how a player got to a scene and how many times we should pop. 
* Use a UI library, Gum looks pretty good. Whatever i pick will need scrolling, paging, 
  rows/columns, steppers, text input, grayboxing, and a way to easily integrate with the code i have. 
  Ideally it will be organized into classes or i can easily make a wrapper to have components. 
  Once I've experimented with the new library and figured out how to fit it in, 
  i need to refactor LinearLayout and Button with new UI components and integrate them. 
* Go through all files and try to decouple, find a guide online to support this 


**** FUTURE FEATURES **** 

* Make some statistics available on the map ui
  (like how many idle trains there are, how much resources of each type you have, etc)
* Make a way to manually get fuel in case you run out of wood/water
* Add player inventory to city interface, so player can put stuff from their inv to city
* Make inventory move if player walks over it
* Add progress bar to overworld machines
* Add combat and reward system
    * Rogue-like/perma-progression mix, time-limited events
      for special rewards at outside cities, permanently available 
      one at the factory. 
* Add warning if player is going to send a train with an empty inv
* Make it so LinearLayout is pageable 
    * This will be important once player gets a high number of trains, 
      but also if we add a high number of machines to Factory
* Make it so trains cant run over other trains 
* Make it so trains need fuel
* Add a text input view
* Combine text input with steppers to say how much of things you want to move 
    between inventories, and how much you want to request to craft
* Add an option to steppers to make them not negative
* Add basic save/load 
* Add some default toasts
* Make stepper fast when you hold down
* Make it so button to enter train doesn't appear if player opened map not at a train station 
* Make scrollable windows 
* Add some tutorial toasts 
* Make a system to ensure collidables cannot overlap as this results in buggy behavior
* Add number of requested items to machine UI 

**** FAR FUTURE FEATURES **** 

* Add a tile system for rpg mode
* Implement dialogue
* Augment Sprite/DrawSystem to handle animation/spritesheets
* Implement player making custom notifications based on train conditions, 
    like a toast pops up when the train has a certain amount of wood or something 
* Consider making a train interior so player can do certain things while waiting inside a train? 

**** NICE TO HAVE LOW PRIORITY **** 

* Add a way to print the world state for debugging
* Add SpaceEven to LinearLayout
* Add a way for sprites to be drawn separately from collision box 
* Add a label to progress bar in machine interface to make it clear what it is when not moving

**** NOT SURE WE WANT BUT MAYBE **** 

* Make drawing System based
* Make UI Drawing based on screen coordinates
* Make inventory draw messages automatically move around or resize other inventories as necessary